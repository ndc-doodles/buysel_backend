{% extends "base.html" %}
{% load static %}


{% block content %}


<div class="fixed top-0 left-0 right-0 z-50">
  <div class="bg-[#8bc83f] text-white text-xs py-2 px-6 md:px-20 flex justify-between items-center">
    <div>Welcome to Our Real Estate Platform</div>
    <div class="space-x-4 flex">
      <a href="#" class="hover:text-gray-200">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
          <path fill="#fff"
            d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95" />
        </svg>
      </a>
      <a href="#" class="hover:text-gray-200">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
          <g fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
            <path
              d="M2.5 12c0-4.478 0-6.718 1.391-8.109S7.521 2.5 12 2.5c4.478 0 6.718 0 8.109 1.391S21.5 7.521 21.5 12c0 4.478 0 6.718-1.391 8.109S16.479 21.5 12 21.5c-4.478 0-6.718 0-8.109-1.391S2.5 16.479 2.5 12" />
            <path d="M16.5 12a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m1.008-5.5h-.01" />
          </g>
        </svg>
      </a>
      <a href="#" class="hover:text-gray-200">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
              viewBox="0 0 24 24"><path fill="#fff"
                d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91c0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21c5.46 0 9.91-4.45 9.91-9.91c0-2.65-1.03-5.14-2.9-7.01A9.82 9.82 0 0 0 12.04 2m.01 1.67c2.2 0 4.26.86 5.82 2.42a8.23 8.23 0 0 1 2.41 5.83c0 4.54-3.7 8.23-8.24 8.23c-1.48 0-2.93-.39-4.19-1.15l-.3-.17l-3.12.82l.83-3.04l-.2-.32a8.2 8.2 0 0 1-1.26-4.38c.01-4.54 3.7-8.24 8.25-8.24M8.53 7.33c-.16 0-.43.06-.66.31c-.22.25-.87.86-.87 2.07c0 1.22.89 2.39 1 2.56c.14.17 1.76 2.67 4.25 3.73c.59.27 1.05.42 1.41.53c.59.19 1.13.16 1.56.1c.48-.07 1.46-.6 1.67-1.18s.21-1.07.15-1.18c-.07-.1-.23-.16-.48-.27c-.25-.14-1.47-.74-1.69-.82c-.23-.08-.37-.12-.56.12c-.16.25-.64.81-.78.97c-.15.17-.29.19-.53.07c-.26-.13-1.06-.39-2-1.23c-.74-.66-1.23-1.47-1.38-1.72c-.12-.24-.01-.39.11-.5c.11-.11.27-.29.37-.44c.13-.14.17-.25.25-.41c.08-.17.04-.31-.02-.43c-.06-.11-.56-1.35-.77-1.84c-.2-.48-.4-.42-.56-.43c-.14 0-.3-.01-.47-.01" /></svg>
      </a>
    </div>
  </div>

  <nav class="bg-white shadow-md py-2 px-6 md:px-20 relative w-full">
    <div class="container mx-auto flex justify-between items-center">
      <a href="{% url 'index' %}">
        <img src="{% static 'img/logo.png' %}" alt="Logo" class="h-14 w-auto" />
      </a>

      <ul class="hidden xl:flex space-x-10 text-gray-700 navbar-times">
        <li><a href="{% url 'index' %}" class="hover:text-[#8bc83f]">Home</a></li>
        <li><a href="{% url 'about' %}" class="hover:text-[#8bc83f]">About Us</a></li>
        <li><a href="{% url 'properties' %}" class="hover:text-[#8bc83f]">Properties</a></li>
        <li><a href="{% url 'agents' %}" class="text-[#8bc83f]">Agents</a></li>
        <li><a href="{% url 'blog' %}" class="hover:text-[#8bc83f]">Blogs</a></li>
        <li><a href="{% url 'contact' %}" class="hover:text-[#8bc83f]">Contact</a></li>
      </ul>

      <a href="{% url 'agentslogin' %}"
        class="hidden xl:flex ml-4 border border-[#8bc83f] text-[#8bc83f] px-6 py-2 items-center gap-2 hover:bg-[#76ad33] hover:text-white transition rounded">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
          <g fill="none" stroke="currentColor" stroke-dasharray="28" stroke-dashoffset="28" stroke-linecap="round"
            stroke-linejoin="round" stroke-width="2">
            <path d="M4 21v-1c0 -3.31 2.69 -6 6 -6h4c3.31 0 6 2.69 6 6v1">
              <animate fill="freeze" attributeName="stroke-dashoffset" dur="0.4s" values="28;0" />
            </path>
            <path d="M12 11c-2.21 0 -4 -1.79 -4 -4c0 -2.21 1.79 -4 4 -4c2.21 0 4 1.79 4 4c0 2.21 -1.79 4 -4 4Z">
              <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.4s" dur="0.4s" values="28;0" />
            </path>
          </g>
        </svg>
        Login
      </a>

      <div class="xl:hidden">
        <button id="mobile-menu-btn" class="text-[#8bc83f] focus:outline-none">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>

    <div id="mobile-menu"
      class="fixed top-0 right-0 w-[90%] h-full bg-white shadow-lg z-50 transform translate-x-full transition-transform duration-300 ease-in-out">
      <div class="p-6 flex justify-end">
        <button id="close-menu" class="text-gray-700 text-2xl">&times;</button>
      </div>
      <ul class="flex flex-col items-start space-y-6 p-6 text-gray-700">
        <li><a href="{% url 'index' %}" class="hover:text-[#8bc83f]">Home</a></li>
        <li><a href="{% url 'about' %}" class="hover:text-[#8bc83f]">About Us</a></li>
        <li><a href="{% url 'properties' %}" class="hover:text-[#8bc83f]">Properties</a></li>
        <li><a href="{% url 'agents' %}" class="text-[#8bc83f]">Agents</a></li>
        <li><a href="{% url 'blog' %}" class="hover:text-[#8bc83f]">Blogs</a></li>
        <li><a href="{% url 'contact' %}" class="hover:text-[#8bc83f]">Contact</a></li>
        <li><a href="{% url 'agentslogin' %}"
            class="text-[#8bc83f] border border-[#8bc83f] px-4 py-2 rounded hover:bg-[#8bc83f] hover:text-white">Login</a>
        </li>
      </ul>
    </div>
  </nav>
</div>




    <div class="  w-full  mx-auto mt-10 grid grid-cols-1 md:grid-cols-2 gap-2 mt-44 px-28 max-md:px-6">
  <div class="space-y-6">
    <img src="{{premium.image.url}}" alt="Agent" class="w-40 h-40 object-cover rounded-lg mx-auto md:mx-0">

    <div>
            <h1 class="text-xl font-semibold">{{premium.name}}</h1>

      <p class="text-gray-600 text-sm">Specialised in {{premium.speacialised}}</p>
    </div>

    <div class="space-y-3 text-sm text-gray-700">
      <div class="flex items-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="#8bc83f" d="M19.95 21q-3.125 0-6.175-1.362t-5.55-3.863t-3.862-5.55T3 4.05q0-.45.3-.75t.75-.3H8.1q.35 0 .625.238t.325.562l.65 3.5q.05.4-.025.675T9.4 8.45L6.975 10.9q.5.925 1.187 1.787t1.513 1.663q.775.775 1.625 1.438T13.1 17l2.35-2.35q.225-.225.588-.337t.712-.063l3.45.7q.35.1.575.363T21 15.9v4.05q0 .45-.3.75t-.75.3"/></svg>
        <span>{{premium.phone}}</span>
      </div>

      <div class="flex items-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="#8bc83f" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm8-7L4 8v10h16V8zm0-2l8-5H4zM4 8V6v12z"/></svg>
        <span>{{premium.email}}</span>
      </div>

      <div class="flex items-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><g fill="none" stroke="#8bc83f" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M12.56 20.82a.96.96 0 0 1-1.12 0C6.611 17.378 1.486 10.298 6.667 5.182A7.6 7.6 0 0 1 12 3c2 0 3.919.785 5.333 2.181c5.181 5.116.056 12.196-4.773 15.64"/><path d="M12 12a2 2 0 1 0 0-4a2 2 0 0 0 0 4"/></g></svg>
        <span>{{premium.city}}</span>
      </div>

      <div class="flex items-center gap-3">
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="#8bc83f" d="M12.04 2c-5.46 0-9.91 4.45-9.91 9.91c0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21c5.46 0 9.91-4.45 9.91-9.91c0-2.65-1.03-5.14-2.9-7.01A9.82 9.82 0 0 0 12.04 2m.01 1.67c2.2 0 4.26.86 5.82 2.42a8.23 8.23 0 0 1 2.41 5.83c0 4.54-3.7 8.23-8.24 8.23c-1.48 0-2.93-.39-4.19-1.15l-.3-.17l-3.12.82l.83-3.04l-.2-.32a8.2 8.2 0 0 1-1.26-4.38c.01-4.54 3.7-8.24 8.25-8.24M8.53 7.33c-.16 0-.43.06-.66.31c-.22.25-.87.86-.87 2.07c0 1.22.89 2.39 1 2.56c.14.17 1.76 2.67 4.25 3.73c.59.27 1.05.42 1.41.53c.59.19 1.13.16 1.56.1c.48-.07 1.46-.6 1.67-1.18s.21-1.07.15-1.18c-.07-.1-.23-.16-.48-.27c-.25-.14-1.47-.74-1.69-.82c-.23-.08-.37-.12-.56.12c-.16.25-.64.81-.78.97c-.15.17-.29.19-.53.07c-.26-.13-1.06-.39-2-1.23c-.74-.66-1.23-1.47-1.38-1.72c-.12-.24-.01-.39.11-.5c.11-.11.27-.29.37-.44c.13-.14.17-.25.25-.41c.08-.17.04-.31-.02-.43c-.06-.11-.56-1.35-.77-1.84c-.2-.48-.4-.42-.56-.43c-.14 0-.3-.01-.47-.01"/></svg>        <span>8569325687</span>
      </div>


    </div>
  </div>


<form class="space-y-4" method="POST">
  {% csrf_token %}
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <input type="text" name="first_name" placeholder="First Name" class="border border-gray-300 rounded px-4 py-2" required>
    <input type="text" name="last_name" placeholder="Last Name" class="border border-gray-300 rounded px-4 py-2" required>
  </div>

  <fieldset class="text-sm text-gray-600">
    <legend class="mb-1 font-medium">Contact Me By <span class="text-red-500">*</span></legend>
    <div class="flex gap-4">
      <label class="inline-flex items-center">
        <input type="radio" name="contact_method" value="email" class="form-radio text-lime-500" required>
        <span class="ml-2">Email</span>
      </label>
      <label class="inline-flex items-center">
        <input type="radio" name="contact_method" value="phone" class="form-radio text-lime-500">
        <span class="ml-2">Phone</span>
      </label>
      <label class="inline-flex items-center">
        <input type="radio" name="contact_method" value="both" class="form-radio text-lime-500">
        <span class="ml-2">Both</span>
      </label>
    </div>
  </fieldset>

  <input type="email" name="email" placeholder="Email" class="border border-gray-300 rounded px-4 py-2 w-full" required>
  <input type="tel" name="phone" placeholder="Phone" class="border border-gray-300 rounded px-4 py-2 w-full">
  <textarea rows="4" name="message" placeholder="Message" class="border border-gray-300 rounded px-4 py-2 w-full"></textarea>

  <button type="submit" class="bg-lime-400 hover:bg-lime-500 text-white font-semibold py-2 px-6 rounded">
    Send Message
  </button>
</form>

    </div>




<div class="mt-10 mb-6 px-28 max-md:px-6">
  <h2 class="text-2xl font-bold text-gray-800">
    Properties Handled by {{premium.name}}
  </h2>
  <p class="text-gray-500 mt-1 text-sm">
    Explore the latest listings managed by this agent.
  </p>
</div>





<section class="px-4 sm:px-6 md:px-12 lg:px-20 xl:px-28">

  <div class="grid grid-cols-2 sm:flex sm:flex-nowrap justify-center items-center gap-3 mb-6 sm:mb-10 mt-6 sm:mt-10">
    <button onclick="toggleViewMode()"
      class="min-w-[80px] sm:min-w-[110px] px-3 sm:px-4 py-2 border border-[#8bc83f] text-[#8bc83f] rounded-lg hover:bg-[#f3fef1] flex items-center justify-center gap-1 text-xs sm:text-sm md:text-base md:hidden">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 sm:w-5 sm:h-5" fill="none"
        viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M4 6h16M4 10h16M4 14h16M4 18h16" />
      </svg>
      <span>View</span>
    </button>
  </div>

  <p id="no-results-msg"
    class="text-center text-red-600 text-sm sm:text-base md:text-lg font-semibold hidden mb-4 sm:mb-6">No
    properties found.</p>

<!-- Property Grid -->
<div id="allProperties" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 xl:grid-cols-4 gap-4 sm:gap-6 w-full mx-auto">

  {% for property in properties %}
  <div
    class="property-card bg-white rounded-[14px] sm:rounded-[18px] shadow-md overflow-hidden relative hover:shadow-lg transition-shadow duration-300"
    data-id="{{ property.id }}" data-type="sale">

    <!-- Image -->
    <div class="relative p-1 sm:p-2">
      {% if property.images.all %}
      <img src="{{ property.images.first.image.url }}" alt="Property Image"
        class="w-full h-40 sm:h-48 md:h-56 object-cover rounded-[14px] sm:rounded-[18px] transition duration-300 property-image"
        data-images='[{% for img in property.images.all %}"{{ img.image.url }}"{% if not forloop.last %},{% endif %}{% endfor %}]' />
      {% else %}
      <img src="{% static 'images/demo.png' %}" alt="Property Image"
        class="w-full h-40 sm:h-48 md:h-56 object-cover rounded-[14px] sm:rounded-[18px] transition duration-300 property-image"
        data-images='["{% static "images/demo.png" %}"]' />
      {% endif %}

      <!-- Dots -->
      <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1 sm:space-x-2 z-10">
        {% for img in property.images.all %}
        <span class="dot w-1 h-1 sm:w-1.5 sm:h-1.5 bg-white rounded-full opacity-70 cursor-pointer"></span>
        {% endfor %}
      </div>
    </div>

    <!-- Purpose Tag -->
    <span
      class="absolute top-2 sm:top-3 left-2 sm:left-3 bg-[red] text-white text-[11px] sm:text-[13px] font-semibold px-2 sm:px-3 py-0.5 sm:py-1 rounded-lg shadow-sm">
      {{ property.purpose }}
    </span>

    <!-- Share Button -->
    <button class="openShareModal absolute top-3 right-3 group"
      data-share-url="{% url 'agent_property_detail' property.id %}"
      data-screenshot="{{ property.screenshot|default:property.images.first.image.url }}">
      <span class="bg-white p-2 rounded-full inline-block shadow">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
          <path fill="#000" fill-rule="evenodd"
            d="M16.5 2.25a3.25 3.25 0 0 0-3.2 3.824L8.57 9.386l-.068.053a3.25 3.25 0 1 0 0 5.121l.068.054l4.73 3.312q-.05.28-.05.574a3.25 3.25 0 1 0 .667-1.973L9.438 13.39c.2-.422.312-.893.312-1.391s-.112-.97-.312-1.391l4.48-3.136A3.25 3.25 0 1 0 16.5 2.25M14.75 5.5a1.75 1.75 0 1 1 3.5 0a1.75 1.75 0 0 1-3.5 0M6.5 10.25a1.75 1.75 0 1 0 0 3.5a1.75 1.75 0 0 0 0-3.5m10 6.5a1.75 1.75 0 1 0 0 3.5a1.75 1.75 0 0 0 0-3.5"
            clip-rule="evenodd" />
        </svg>
      </span>
    </button>

    <!-- Card Content -->
    <div class="p-3 sm:p-4">
      <p class="text-[#8b8b8b] font-semibold text-[11px] sm:text-[13px] mb-1 sm:mb-2">{{property.sq_ft}}</p>
      <h3 class="text-[16px] sm:text-[19px] font-semibold text-gray-800 mb-1">{{ property.label }}</h3>
      <p class="text-[11px] sm:text-[12px] text-gray-400 overflow-hidden whitespace-nowrap text-ellipsis mb-1">
        {{property.description}}
      </p>
      <a href="{% url 'agent_property_detail' property.id %}"
        class="inline-block text-[11px] sm:text-[12px] text-[#0088FF] underline transition">View Details</a>

      <hr class="my-2 border-gray-200" />

      <p class="text-[18px] sm:text-[22px] font-semibold text-black flex items-center">
        {{property.perprice}}
      </p>
      <p class="text-[#8b8b8b] font-medium text-[11px] sm:text-[13px] mb-2">Total {{property.price}}</p>

      <hr class="my-2 border-gray-200" />

      <div class="flex justify-between items-center mb-2">
        <p class="text-[14px] sm:text-[20px] text-gray-500 flex items-center space-x-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 sm:w-5 sm:h-5" viewBox="0 0 24 24">
            <g fill="none" stroke="#8bc83f" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
              <path d="M12.56 20.82a.96.96 0 0 1-1.12 0C6.611 17.378 1.486 10.298 6.667 5.182A7.6 7.6 0 0 1 12 3c2 0 3.919.785 5.333 2.181c5.181 5.116.056 12.196-4.773 15.64" />
              <path d="M12 12a2 2 0 1 0 0-4a2 2 0 0 0 0 4" />
            </g>
          </svg>
          <span class="text-[12px] sm:text-[15px] text-black">{{property.land_area}}</span>
        </p>
        <a href="{{property.location}}" class="text-[#0088FF] text-[11px] sm:text-[13px] underline">Directions</a>
      </div>

      <div class="flex items-center justify-between mt-2 sm:mt-3 space-x-2 w-full sm:w-64">
        <a href="tel:{{property.phone}}"
          class="w-1/2 flex items-center justify-center text-xs sm:text-sm bg-[#8bc83f] text-white px-2 py-1.5 sm:py-2 rounded-[10px] sm:rounded-[12px] transition space-x-1">
          Call
        </a>

        <a href="https://wa.me/{{property.whatsapp}}" target="_blank"
          class="w-1/2 flex items-center justify-center text-xs sm:text-sm border border-black px-2 py-1.5 sm:py-2 rounded-[10px] sm:rounded-[12px] transition space-x-1 group bg-white hover:bg-[#8bc83f]">
          <img src="{% static '/img/whatsapp.png'%}" class="w-4 h-4 sm:w-5 sm:h-5">
          <span class="text-black group-hover:text-white">WhatsApp</span>
        </a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
function takeScreenshot(card) {
    const propertyId = card.dataset.id;
    if (!propertyId || card.dataset.screenshot === "true") return;

    html2canvas(card, { useCORS: true, backgroundColor: "#fff" }).then(canvas => {
        canvas.toBlob(blob => {
            if (!blob) return;
            const formData = new FormData();
            formData.append("property_id", propertyId);
            formData.append("screenshot", blob, `property_${propertyId}.png`);
            fetch("{% url 'upload_agents_screenshot' %}", {
                method: "POST",
                body: formData,
                headers: { "X-CSRFToken": "{{ csrf_token }}" }
            }).then(res => res.json())
              .then(data => {
                  console.log("Screenshot saved:", data);
                  card.dataset.screenshot = "true";
              })
              .catch(err => console.error("Upload failed:", err));
        }, "image/png");
    }).catch(err => console.error("html2canvas failed:", err));
}

// Wait for the full page including images
window.addEventListener("load", () => {
    document.querySelectorAll(".property-card").forEach(card => {
        const images = card.querySelectorAll("img");
        let loadedCount = 0;
        if (images.length === 0) {
            takeScreenshot(card);
        } else {
            images.forEach(img => {
                if (img.complete) {
                    loadedCount++;
                    if (loadedCount === images.length) takeScreenshot(card);
                } else {
                    img.addEventListener("load", () => {
                        loadedCount++;
                        if (loadedCount === images.length) takeScreenshot(card);
                    });
                }
            });
        }
    });
});
</script>





</section>


    <!-- Share Modal -->
<div id="shareModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="bg-white rounded-lg p-6 w-80 shadow-lg relative">
    <button id="closeShareModal" class="absolute top-2 right-2 text-gray-600 hover:text-black">✕</button>
    <h2 class="text-lg font-semibold mb-4 text-center">Share this Property</h2>
    <div class="flex flex-col space-y-3" id="shareLinks"></div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const shareModal = document.getElementById('shareModal');
  const closeBtn = document.getElementById('closeShareModal');
  const shareLinks = document.getElementById('shareLinks');

  const promoText = encodeURIComponent(
    "Looking to buy or sell property? buysel.in offers great deals for buyers and quick listings for sellers. " +
    "Find homes, apartments, and commercial spaces at the best prices."
  );

  document.querySelectorAll('.openShareModal').forEach(btn => {
    btn.addEventListener('click', () => {
      const url = btn.getAttribute('data-share-url');
      const fullUrl = `${window.location.origin}${url}`;

      shareLinks.innerHTML = `
        <!-- WhatsApp -->
        <a href="https://api.whatsapp.com/send?text=${promoText}%20${fullUrl}" target="_blank"
           class="flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
           <img src="{% static 'img/whatsapp.png' %}" class="w-5 h-5" />
           <span>WhatsApp</span>
        </a>

        <!-- Facebook -->
        <a href="https://www.facebook.com/sharer/sharer.php?u=${fullUrl}&quote=${promoText}" target="_blank"
           class="flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
           <img src="{% static 'img/facebook1.png' %}" class="w-5 h-5" />
           <span>Facebook</span>
        </a>

        <!-- Telegram -->
        <a href="https://t.me/share/url?url=${fullUrl}&text=${promoText}" target="_blank"
           class="flex items-center space-x-2 px-4 py-2 bg-blue-400 text-white rounded-lg hover:bg-blue-500">
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#fff" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19c-.14.75-.42 1-.68 1.03c-.58.05-1.02-.38-1.58-.75c-.88-.58-1.38-.94-2.23-1.5c-.99-.65-.35-1.01.22-1.59c.15-.15 2.71-2.48 2.76-2.69a.2.2 0 0 0-.05-.18c-.06-.05-.14-.03-.21-.02c-.09.02-1.49.95-4.22 2.79c-.4.27-.76.41-1.08.4c-.36-.01-1.04-.2-1.55-.37c-.63-.2-1.12-.31-1.08-.66c.02-.18.27-.36.74-.55c2.92-1.27 4.86-2.11 5.83-2.51c2.78-1.16 3.35-1.36 3.73-1.36c.08 0 .27.02.39.12c.1.08.13.19.14.27c-.01.06.01.24 0 .38"/></svg>
           <span>Telegram</span>
        </a>

        <!-- Copy Link -->
        <button onclick="copyToClipboard('${fullUrl}', this)"
            class="flex items-center space-x-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
              <g fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.5">
                <path d="M7 9.667A2.667 2.667 0 0 1 9.667 7h8.666A2.667 2.667 0 0 1 21 9.667v8.666A2.667 2.667 0 0 1 18.333 21H9.667A2.667 2.667 0 0 1 7 18.333z"/>
                <path d="M4.012 16.737A2 2 0 0 1 3 15V5c0-1.1.9-2 2-2h10c.75 0 1.158.385 1.5 1"/>
              </g>
            </svg>
            <span>Copy Link</span>
        </button>
      `;

      shareModal.classList.remove('hidden');
    });
  });

  // Copy function for the Copy button
  window.copyToClipboard = (text, button) => {
    navigator.clipboard.writeText(text).then(() => {
      const originalText = button.querySelector('span').textContent;
      button.querySelector('span').textContent = "Copied!";
      setTimeout(() => button.querySelector('span').textContent = originalText, 1500);
    }).catch(err => console.error("Failed to copy: ", err));
  };

  // Close modal
  closeBtn.addEventListener('click', () => shareModal.classList.add('hidden'));
  shareModal.addEventListener('click', (e) => {
    if (e.target === shareModal) shareModal.classList.add('hidden');
  });
});
</script>






    <div id="sidebarFilter"
      class="fixed top-1/2 right-0 h-[750px] w-[350px] bg-white shadow-lg z-50 transform -translate-y-1/2 translate-x-full transition-transform duration-300 ease-in-out overflow-y-auto">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-semibold text-gray-800">Filter Properties</h3>
          <button onclick="toggleSidebar()"
            class="text-gray-600 text-2xl hover:text-red-600">&times;</button>
        </div>

        <div class="space-y-4">
          <div>
            <label class="block text-sm font-semibold mb-1">Purpose</label>
            <select class="w-full border border-gray-300 rounded-lg px-3 py-2">
              <option>All</option>
              <option>Sale</option>
              <option>Rent</option>
              <option>Lease</option>
            </select>
          </div>

          <div>
            <label class="block text-sm font-semibold mb-1">Category</label>
            <select class="w-full border border-gray-300 rounded-lg px-3 py-2">
              <option>All</option>
              <option>House</option>
              <option>Land</option>
              <option>Offplans</option>
            </select>
          </div>

          <div>
            <label class="block text-sm font-semibold mb-1">District</label>
            <select class="w-full border border-gray-300 rounded-lg px-3 py-2">
              <option>Select District</option>
              <option>Ernakulam</option>
              <option>Trivandrum</option>
              <option>Kozhikode</option>
            </select>
          </div>

          <div>
            <label class="block text-sm font-semibold mb-1">City</label>
            <select class="w-full border border-gray-300 rounded-lg px-3 py-2">
              <option>Select City</option>
              <option>Kochi</option>
              <option>Thrissur</option>
              <option>Kannur</option>
            </select>
          </div>

          <div class="flex gap-2">
            <div class="w-1/2">
              <label class="block text-sm font-semibold mb-1">Min Price</label>
              <input type="number"
                class="w-full border border-gray-300 rounded-lg px-3 py-2"
                placeholder="₹ Min">
            </div>
            <div class="w-1/2">
              <label class="block text-sm font-semibold mb-1">Max Price</label>
              <input type="number"
                class="w-full border border-gray-300 rounded-lg px-3 py-2"
                placeholder="₹ Max">
            </div>
          </div>

          <div>
            <label class="block text-sm font-semibold mb-1">Pincode</label>
            <input type="text"
              class="w-full border border-gray-300 rounded-lg px-3 py-2"
              placeholder="Enter Pincode">
          </div>

          <div>
            <label class="block text-sm font-semibold mb-1">Agent</label>
            <input type="text"
              class="w-full border border-gray-300 rounded-lg px-3 py-2"
              placeholder="Enter Agent Name">
          </div>

          <button
            class="w-full mt-20 bg-[#8bc83f] text-white py-2 rounded-lg hover:bg-[#75a52c] transition ">
            Apply Filters
          </button>
        </div>
      </div>
    </div>


<script>
document.addEventListener("DOMContentLoaded", function() {
  // Find all property cards
  document.querySelectorAll(".property-card").forEach((card) => {
    const imageEl = card.querySelector(".property-image");
    const dots = card.querySelectorAll(".dot");
    const images = JSON.parse(imageEl.dataset.images); // Get array from backend
    let currentIndex = 0;

    function changeImage(index) {
      imageEl.src = images[index];
      currentIndex = index;

      // Reset all dots
      dots.forEach(dot => dot.classList.remove("w-2", "h-2", "opacity-100"));
      dots.forEach(dot => dot.classList.add("w-1.5", "h-1.5", "opacity-70"));

      // Highlight active dot
      dots[index].classList.remove("w-1.5", "h-1.5", "opacity-70");
      dots[index].classList.add("w-2", "h-2", "opacity-100");
    }

    // Attach click events to dots
    dots.forEach((dot, i) => {
      dot.addEventListener("click", () => changeImage(i));
    });

    // Load first image
    changeImage(0);
  });
});
</script>


<script src="{% static 'js/script.js' %}"></script>


{% endblock %}











